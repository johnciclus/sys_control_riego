Instalación del servidor

Nombre del usuario: 	usta
Nombre del servidor:	limonal
contraseña:		limonal01
contraseñaBD:		piolin

1. 	Instalar servidor Linux Ubuntu 12.04 32-bit

2.	Instalar Gnome-Panel:
	sudo apt-get install gnome-panel

3. 	Instalar Vim:
	sudo apt-get install vim

4. 	Instalar OpenSsh:
	sudo apt-get install openssh-server

5.	Instalar MySQL:
	sudo apt-get install mysql-server mysql-common mysql-client
	
	*Iniciar, reiniciar o detener el servidor mysql:
	/etc/init.d/mysql start
	/etc/init.d/mysql restart
	/etc/init.d/mysql stop

	*Configurar arranque automático:
	update-rc.d mysql defaults

	*Archivo de configuración de mysql:
    	vim /etc/mysql/my.cnf

	*Cambiar contraseña de root
	mysql -h localhost -u root -p
	use mysql;
	update user set password=PASSWORD('password') where user='root';
	flush privileges;

6.	Instalar JAVA:	
	sudo apt-get install python-software-properties
	sudo add-apt-repository ppa:webupd8team/java
	sudo apt-get update
	sudo apt-get install oracle-java7-installer
	java -version

7.	Instalar JDK:
	sudo apt-get install default-jdk
	javac -version

8.	Configurar variables de entorno:
	*Editar el archivo profile
	vim /etc/profile

	*Agregar las siguientes líneas al final
	export JAVA_HOME=/usr/lib/jvm/java-7-oracle
	export PATH=$PATH:$JAVA_HOME/bin
	export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar
	export JRE_HOME=$JAVA_HOME/jre

	*Editar el archivo bashrc
	vim ~/.bashrc

	*Agregar las siguientes líneas al final
	export JAVA_HOME=/usr/lib/jvm/java-7-oracle
	export PATH=$PATH:$JAVA_HOME/bin
	export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar
	export JRE_HOME=$JAVA_HOME/jre

	*Reiniciar el archivo bashrc
	. ~/.bashrc

9. 	Instalar tomcat7 y herramientas de administración
	sudo apt-get install tomcat7 tomcat7-admin	

	*Editar el archivo profile
	vim /etc/profile

	*Agregar las siguientes líneas al final
	export CATALINA_HOME=/usr/share/tomcat7
	export BASEDIR=$CATALINA_HOME

	*Editar el archivo bashrc
	vim ~/.bashrc

	*Agregar las siguientes líneas al final
	export CATALINA_HOME=/usr/share/tomcat7
	export BASEDIR=$CATALINA_HOME

	*Modificar los permisos a la carpeta tomcat7
	chmod 777 -R /usr/share/tomcat7

	*Iniciar el tomcat desde el arranque del sistema
	vim /etc/init.d/tomcat

	*Agregar las siguientes líneas
	#This is tihe init script for starting up the
	#  Jakarta Tomcat server
	#
	# chkconfig: 345 91 10
	# description: Starts and stops the Tomcat daemon.
	#
	# Source function library.
	. /etc/rc.d/init.d/functions
	# Get config.
	. /etc/sysconfig/network
	# Check that networking is up.
	[ "${NETWORKING}" = "no" ] && exit 0
	# Tomcat auto-start
	# description:Auto-starts tomcat
	# processname:tomcat
	# pidfile: /var/run/tomcat.pid
	tomcat=/usr/share/tomcat7
	startup=$tomcat/bin/startup.sh
	shutdown=$tomcat/bin/shutdown.sh
	export JAVA_HOME=/usr/java/java[version]
	start(){
	 echo -n $"Starting Tomcat service: "
	 #daemon -c
	 $startup
	 RETVAL=$?
	 echo
	}
	stop(){
	 action $"Stopping Tomcat service: " $shutdown
	 RETVAL=$?
	 echo
	}
	restart(){
	  stop
	  start
	}
	# See how we were called.
	case "$1" in
	start)
	 start
	 ;;
	stop)
	 stop
	 ;;
	status)
	# This doesn't work
	 status tomcat
	 ;;
	restart)
	 restart
	 ;;
	*)
	 echo $"Usage: $0 {start|stop|status|restart}"
	 exit 1
	esac
	exit 0

	*Agregar tomcat al iniciar el sistema
	chmod 755 /etc/init.d/tomcat
	update-rc.d tomcat defaults 99
	
	*Crear archivo para reiniciar servidor
	cd /
	vim ReiniciarServidor.sh

	*Agregar las siguientes líneas
	#!/bin/bash
	service tomcat stop
	rm -rf /usr/share/tomcat7/work/Catalina/localhost/SysControlRiego
	service tomcat start

	*Modificar los permisos del archivo ReiniciarServidor.sh
	chmod 777 ReiniciarServidor.sh


9. 	Borrar directorio ROOT de tomcat7
	sudo rm -r /var/lib/tomcat7/webapps/ROOT

10.	Subir proyecto SysControlRiego	
	crear directorio: 	mkdir /www
	copiar proyecto a:	cp -r origen /www

11. 	Desplegar proyecto SysControlRiego
	
	*Editar el archivo tomcat-users.xml 
	vim /etc/tomcat7/tomcat-users.xml

	*Agregar las siguientes líneas
	<role rolename="manager-gui"></role>
	<user username="user" password="password" roles="manager-gui"></user>

	Aceder a: http://localhost:8080/manager/html/

	trayectoria: 	/
	URL de conf: 	/www/SysControlRiego/WebContent/WEB-INF/web.xml
	Directorio:	/www/SysControlRiego/WebContent/

	Click en Desplegar

12.	Cargar Backup de Base de Datos
	
	Accedemos al teminal de Mysql:

	mysql -u root -p
	
	Creamos y usamos la base de datos correspondiente:

	create database basesystemteleco;
	use basesystemteleco;	

	Cargamos el archivo del Dump:

	source ~/SysControlRiegoBD.sql

	
13.	Configurar Driver Mysql para JDBC.

	sudo service mysql restart

	sudo apt-get install libmysql-java

	mysql-connector-java-5.1.16.jar $CATALINA_HOME/lib

	sudo service mysql restart

	sudo /etc/init.d/tomcat7 start









	sudo apt-get install mysql-server
	sudo apt-get install mysql-client
	sudo apt-get install libmysql-java


	mysql -u root -p

	create database [database_name];	

	grant all privileges on [database_name].* to [user]@localhost identified by "[password]";
	flush privileges;
	

	*Probar la conexión
	mysql -u [user] -h 127.0.0.1 -p
	
	export CLASSPATH=/usr/share/java/mysql-connector-java-5.1.27-bin.jar:$CLASSPATH
